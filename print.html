<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Encointer Book</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="introduction.html">Introduction</a></li><li class="expanded "><a href="economics.html"><strong aria-hidden="true">1.</strong> Economics</a></li><li><ol class="section"><li class="expanded "><a href="economics-cantillon.html"><strong aria-hidden="true">1.1.</strong> The Cantillon Effect</a></li><li class="expanded "><a href="economics-ubi.html"><strong aria-hidden="true">1.2.</strong> Universal Basic Income</a></li><li class="expanded "><a href="economics-demurrage.html"><strong aria-hidden="true">1.3.</strong> Demurrage</a></li><li class="expanded "><a href="economics-local-currencies.html"><strong aria-hidden="true">1.4.</strong> Local Currencies</a></li><li class="expanded "><a href="economics-interest.html"><strong aria-hidden="true">1.5.</strong> On Saving, Loans and Interest</a></li></ol></li><li class="expanded "><a href="ssi.html"><strong aria-hidden="true">2.</strong> Self-Sovereign Identity</a></li><li class="expanded "><a href="protocol.html"><strong aria-hidden="true">3.</strong> The Encointer Protocol</a></li><li><ol class="section"><li class="expanded "><a href="protocol-threat-model.html"><strong aria-hidden="true">3.1.</strong> Threat Model</a></li></ol></li><li class="expanded "><a href="decentralization.html"><strong aria-hidden="true">4.</strong> Decentralization</a></li><li class="expanded "><a href="deployments.html"><strong aria-hidden="true">5.</strong> Deployments</a></li><li><ol class="section"><li class="expanded "><a href="testnet-gesell.html"><strong aria-hidden="true">5.1.</strong> Gesell</a></li><li><ol class="section"><li class="expanded "><a href="testnet-gesell-tutorial.html"><strong aria-hidden="true">5.1.1.</strong> Tutorial</a></li></ol></li><li class="expanded "><a href="testnet-cantillon.html"><strong aria-hidden="true">5.2.</strong> Cantillon</a></li><li class="expanded "><a href="parachain-kusama.html"><strong aria-hidden="true">5.3.</strong> Encointer Kusama Parachain</a></li><li class="expanded "><a href="deployments-register-community.html"><strong aria-hidden="true">5.4.</strong> Register a New Community Manually</a></li></ol></li><li class="expanded "><a href="bazaar.html"><strong aria-hidden="true">6.</strong> Bazaar</a></li><li class="expanded "><a href="app.html"><strong aria-hidden="true">7.</strong> App</a></li><li class="expanded "><a href="explorer.html"><strong aria-hidden="true">8.</strong> Explorer</a></li><li class="expanded "><a href="developers.html"><strong aria-hidden="true">9.</strong> Developers</a></li><li><ol class="section"><li class="expanded "><a href="developers-notee-local-setup.html"><strong aria-hidden="true">9.1.</strong> Local notee Setup</a></li><li class="expanded "><a href="developers-bot-communities.html"><strong aria-hidden="true">9.2.</strong> Bot Communities</a></li><li class="expanded "><a href="developers-notee-multi-community-growth-benchmark.html"><strong aria-hidden="true">9.3.</strong> Benchmark Multi-Community Growth</a></li><li class="expanded "><a href="developers-teeproxy-local.html"><strong aria-hidden="true">9.4.</strong> Local TEEproxy setup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">The Encointer Book</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><img src="./fig/encointer_logo_orig.svg" alt="logo" /></p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>This is becoming the main documentation resource for Encointer. It is work in progress.</p>
<p>For more detailed information refer to the <a href="https://github.com/encointer/whitepaper/raw/master/encointer_whitepaper.pdf">whitepaper</a></p>
<h1><a class="header" href="#economics" id="economics">Economics</a></h1>
<p>This chapter shall be an opinionated interpretation of the status quo and what we expect to acheive with Encointer.</p>
<h1><a class="header" href="#the-cantillon-effect" id="the-cantillon-effect">The Cantillon Effect</a></h1>
<p>Richard Cantillon is known for his analysis on the effects of a change in money supply in a state on inequality. Around the year 1730 he wrote in his <em>Essay sur la nature du commerce en général</em>:</p>
<blockquote>
<p>If the increase in actual money comes from the state's gold and silver mines, the mines' owner,  the entrepreneurs, the smelters, the refiners and generally all those who work in them will increase their expenditure in line with their gains. At home they will consume more meat and wine or beer than they used to, and they will become accustomed to having better clothes, finer linen, and more ornate houses and other sought-after commodities. Consequently they will give employment to some craftsmen who hitherto had not as much work and who, for the same reason will increase their expenditure. All if this increased expenditure on meat, wine, wool, and the like will necessarily reduce the share of other people  in the state who are not the initial beneficiaries from the wealth of the mines in question. The bargaining in the market, with the demand for meat, wine, wool and the like being stronger than usual, will not fail to increase their prices.</p>
</blockquote>
<p>Nowadays, money supply isn't affected by mining gold and silver. It's the banks that issue money as credit - out of nothing. Translating Cantillon into our time, we should replace <em>miner</em> by <em>banker</em>. The rest of the story still applies. However, in spite of quantitative easing we don't see much price inflation for essential goods. This effect can be explained by observing that all this newly issued money never reaches the masses. </p>
<p>Encointer aims at inverting the <em>Cantillon Effect</em>. Instead of issuing money <em>at the top</em>, as credit to businesses and creditworthy individuals, we issue money <em>at the bottom</em>. Every individual gets a universal basic income: freshly issued money.</p>
<h1><a class="header" href="#universal-basic-income" id="universal-basic-income">Universal Basic Income</a></h1>
<p>A universal basic income (UBI) is a modest amount of money paid unconditionally to individuals on a regular basis (<a href="https://www.penguin.co.uk/books/304/304706/basic-income/9780141985480.html">Standing</a>). Most advocates of UBI aim at introducing it at a national level, as a monthly income to all legal (fiscal) residents and paid out in cash (denominated in national currency). Usually, a UBI is suggested to be financed by some form of taxation. As <a href="https://www.hup.harvard.edu/catalog.php?isbn=9780674052284">Van Parijs &amp; Vanderborght</a> explain, a national UBI may lead to justice among thieves (achieving more equality within a wealthy nation while there’s staggering inequality globally). They therefore argue for a global UBI, as do <a href="http://www.worldbasicincome.org.uk/">WBI</a> or <a href="http://www.globalincome.org/">GBI</a>.</p>
<p>Encointer aims at providing a global UBI in terms of units of cryptocurrency created on a regular basis and distributed to individuals (almost) unconditionally. Let’s examine the characteristics of such an encointer-UBI:</p>
<h2><a class="header" href="#universal" id="universal">universal</a></h2>
<p>Encointer is paid out to every human being able and willing to attend encointer meetus every 41 days and in posession of a smartphone. This unfortunately excludes persons with certain disabilities as well as those without a smartphone. Also, the need to travel to meetups comes at varying cost, depending on local population densities – a disadvantage to people living in remote areas. While this is not exactly unconditional, we think it is less exclusive on a global scale than introducing national UBI schemes in few wealthy nations. Moreover, encointer might promote the concept of UBI and pave the way for institutionalized national or global UBI.</p>
<h2><a class="header" href="#basic" id="basic">basic</a></h2>
<p>Nothing in the definition of UBI defines a specific amount. However, it is often understood to be sufficient to cover basic needs and therefore provide economic security to its beneficiaries. In order to do so, it should also be stable. Encointer is a new cryptocurrency with algorithmically defined monetary supply. Only the (global) market can define its purchasing power.
global vs local currency</p>
<p>Cryptocurrencies based on public unpermissioned blockchains are global by nature. Encointer is such a cryptocurrency – with the important added feature of allowing local currencies to be issued, as will be discussed below. Encointer is paid out in equal nominal amounts to every individual. Technically, there is no decentralized way of doing otherwise as the P2P network has no awareness of national borders or the cost of living. As a means for UBI this is a mixed blessing. If UBI is expected to be suffient to cover basic needs there is no way to achieve this goal with a global currency. Purchasing power of one unit of global currency would vary hugely among different regions. The upside being that the UBI’s purchasing power is in that case expected to be higher in weaker economies, therefore reducing global inequality.</p>
<p>Because Encointer issuance involves meetups with known geolocation, it is technically feasible to issue local currencies which are algorithmically bound to high-interaction communities (though ignorant of national borders). This would allow the UBI to be denominated in a currency which is meant to be used within local ecosystems yet freely tradable globally.
real value</p>
<p>The purchasing power of a unit of local encointer currency is market-based. It isn’t backed by gold or trust in some nations central bank. It’s value is determined by its usefulness as a store of value, medium of transfer or unit of account. Depending on national circumstances, the usefulness of encointer can vary. Where large parts of the populations are unbanked, encointer could complement national currency because it is accessible to everyone and more convenient to use and store than cash.</p>
<p>Another angle from which to define value could be international development aid. Encointer would allow to distribute aid to individuals living in a specified area directly by buying their local currency. It would even be possible to buy such local currency at fixed rates, thereby ensuring a stable value of that local currency. Administrative cost and misappropriation of development aid could be reduced significantly.</p>
<h2><a class="header" href="#income" id="income">income</a></h2>
<p>Encointer delivers an income in a fixed nominal amount of digital currency, paid (or issued) in regular intervals (for every ceremony meetup attended, happening in fixed intervals of 41 days) to all participating individuals. This income is obligation free and is given to the rich and the poor alike.</p>
<p>This income is paid for by issuing money and therefore by nominal inflation of encointer currency. The absolute nominal inflation rate depends on the number of ceremony meetup participants. And there is a correcting factor: Demurrage!</p>
<h2><a class="header" href="#literature" id="literature">Literature</a></h2>
<ul>
<li><a href="https://www.penguin.co.uk/books/304/304706/basic-income/9780141985480.html">Guy Standing, Basic Income: And How We Can Make It Happen</a></li>
<li><a href="https://www.hup.harvard.edu/catalog.php?isbn=9780674052284">Van Parijs &amp; Vanderborght, Basic Income – A Radical Proposal for a Free Society and a Sane Economy</a></li>
</ul>
<h1><a class="header" href="#demurrage" id="demurrage">Demurrage</a></h1>
<p>Encointer currencies feature <a href="https://en.wikipedia.org/wiki/Demurrage_(currency)">nominal demurrage</a>: All balances get devalued over time. The funds you’re holding lose 7% of their nominal value every month. Think of this devaluation like a payment to a solidarity fund that pays for the UBI. This way, Encointer can issue monthly UBI and still maintain stable money supply as shown by the simulation in the figure below. Another advantage of demurrage has been described by <a href="https://en.wikipedia.org/wiki/Silvio_Gesell">Silvio Gesell</a> when he proposed <a href="https://en.wikipedia.org/wiki/Freigeld">Freigeld</a> in 1916: Demurrage increases money velocity, which in turn fuels the local economy.</p>
<p><img src="./fig/ubi-vs-demurrage-balance.svg" alt="demurrage" /></p>
<p><em>Money supply for a stationary economy with a demurrage fee of 7% per month and a population of 10’000 participants. After an initial phase, the UBI of 1 token per ceremony maintains a constant ratio to the total money supply and therefore maintains a constant real value.</em></p>
<h2><a class="header" href="#comparison" id="comparison">Comparison</a></h2>
<p>Demurrage is mainly known as a means to increase money velocity. Known <a href="economics-local-currencies.html">local currencies</a> have chosen demurrage to be in the range of 2-8% per year.</p>
<p>Due to technical limitations, demurrage is often charged linearly, like 2% of the face value per quarter as in the case Chiemgauer, where demurrage is applied by stamping paper bills. Encointer has more technical freedom and charges <em>compound</em> demurrage, as a percentage of its current value. The difference between linear and compound demurrage becomes clear after 50 quarters: Your 100 Chiemgauer have cost 100€ in demurrage fees. With compound demurrage, your 100 Chiemgauer would still be worth</p>
<p>100€ * (1-0.02)^50 = 36.42€</p>
<h1><a class="header" href="#local-currencies" id="local-currencies">Local Currencies</a></h1>
<p>Cryptocurrencies are fundamentally global in nature. Their networks are decentralized and agnostic to national borders. But global currencies have a severe disadvantage: Their purchase value can evolve very differently in different regions. The Euro is such an example, which is the official currency in many european countries with distinct fiscal policies and economic development. While there are political reasons to favor such a unifying currency, many economists doubt the concept. States with less economic growth have no option of devaluing their national currency. They can only get into debt - and then get forced into austerity, further weakening their economy.</p>
<p>Local currencies on the other hand are mainly affected by local economy. </p>
<h2><a class="header" href="#classification" id="classification">Classification</a></h2>
<p>Known examples of local currencies can be divided into <em>mutual credit</em>,  <em>local fiat currencies</em> and <em>time banks</em>.</p>
<h3><a class="header" href="#mutual-credit" id="mutual-credit">Mutual Credit</a></h3>
<p><a href="https://en.wikipedia.org/wiki/Mutual_credit">Mutual credit</a> is a membership based, cashless currency created by clearing positive and negative balances between members when they trade. Usually, the accounts are denominated in national currency.
If Alice provides a service worth 100$ to Bob, Alices balance will be +100$, Bob's will be -100$. Alice can later spend her 100$ balance in a trade with Charlie, who may be interested in a service Bob provides.
Businesses are often allowed to have negative balances in the order of their usual turnover for a few months. These schemes rely on a local authority that performs due diligence when accepting new members and bans defaulters.</p>
<p>Examples are barter networks like <em>Talent</em> or business exchange networks like <em>WIR</em>, <em>RES</em>.</p>
<p>Mutual credit usually comes with high transaction costs. You might not always find the product you are looking for and it may be challenging to accept such currency for payment if you don't know where to spend it later.</p>
<p>In an economic environment of deflation, when there is a shortage of money because banks are reluctant to issue credits, mutual credit has shown to be of great value [1]. But when there's an abundance of money, these networks are unattractive and they generally don't further Encointer's goal of reducing inequality.</p>
<h3><a class="header" href="#local-fiat-currencies" id="local-fiat-currencies">Local Fiat Currencies</a></h3>
<p>Currencies like Wörgl's AB Schein, Chiemgauer or Berkshares are denominated in national currency. Often they have circulating paper bills, sometimes featuring demurrage. What they all have in common: They are only circulating within a local community and are worthless elsewhere. Often, they are redeemable for national currency, sometimes subject to a small fee. Sometimes redemption is restricted to businesses.</p>
<p>On the bottom line, such currencies can be understood as a loyalty programme promoting local spending, sometimes incentivized with discounts. They are successful in strenghtening the spirit of local community [1] and they can mitigate unemployment in an environment of deflation (Wörgl). However, due to globalization, local goods are often more expensive than imported ones. Therefore, these currencies are not attractive for poorer members of the community if they have to buy the local currency with national currency in the first place.</p>
<p><a href="https://www.grassrootseconomics.org/community-currencies">Grassroots Economics'</a> Sarafu Credit in Kenya is a very innovative approach that shows significant social impact by empowering poor neighbourhoods by issuing money to local businesses directly. However, their concept introduces complexity, as money supply and distribution so far relies on careful engineering by experts from outside the community, for each community specifically. Moreover, Sarafu Credit is backed by donation money. While this may resemble a cash-transfer scheme, it actually isn't: Foreign capital is used as a fractional reserve for the local currency by applying <a href="https://medium.com/linum-labs/intro-to-bonding-curves-and-shapes-bf326bc4e11a">bonding curves</a>.</p>
<h3><a class="header" href="#time-banks" id="time-banks">Time Banks</a></h3>
<p>A very egalitarian category of local currencies are time banks. They proclaim that one hour's worth of service by one human has equal value to one hour's work by any other. Mostly, they work like mutual credit currencies, with the difference that the denomination is hours instead of national currency.</p>
<p>Examples are Blaengarw Time Centre, Dane County Time Bank</p>
<p>While the concept of time banks has shown to increase social capital [1], in practise they feature high transaction cost and liquid matchmaking showed to be challenging. The main benefactors end up to be the same individuals that also perform well on a free market based on national money. If your service is in high demand, you will be able collect more hours than you'll be able to spend on services you desire.</p>
<h2><a class="header" href="#examples" id="examples">Examples</a></h2>
<h3><a class="header" href="#ab-schein-wörgl" id="ab-schein-wörgl">AB-Schein Wörgl</a></h3>
<p>During the great depression, the austrian village of Wörgl attempted a monetary experiment to fight deflation: A complementary local currency.</p>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">Schilling (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by the muncipality, as partial salary for infrastructure  work</td></tr>
<tr><td align="left">backing</td><td align="left">(full?) reserve in Schilling, provided by wealthy individuals</td></tr>
<tr><td align="left">demurrage</td><td align="left">12% / year linear pro rata</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">2%</td></tr>
<tr><td align="left">date</td><td align="left">1932 until prohibited in 1933</td></tr>
</tbody></table>
<p>Observed Impact:</p>
<ul>
<li>lower unemployment (-16% while elsewhere +19% in 1933)</li>
<li>8-10x money velocity</li>
<li>improved infrastructure: bridge, ski-jump, streets</li>
</ul>
<p><a href="http://userpage.fu-berlin.de/%7Eroehrigw/schmitt/text6.htm">source</a></p>
<h3><a class="header" href="#chiemgauer" id="chiemgauer">Chiemgauer</a></h3>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">Euro (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by Chiemgau association, in exchange for Euro</td></tr>
<tr><td align="left">backing</td><td align="left">full reserve in Euro</td></tr>
<tr><td align="left">demurrage</td><td align="left">8% / year linear pro rata</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">5% (of which 3% go to local associations chosen by buyers of Chiemgauer)</td></tr>
<tr><td align="left">date</td><td align="left">2003 until now</td></tr>
</tbody></table>
<h3><a class="header" href="#wir" id="wir">WIR</a></h3>
<p>WIR is rather a reciprocal exchange network (barter ring) - but it is an official currency (CHW). It is only open to businesses, not private persons.</p>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">CHF (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by WIR bank as credit (with low interest rate)</td></tr>
<tr><td align="left">backing</td><td align="left">mixed-asset backed</td></tr>
<tr><td align="left">demurrage</td><td align="left">none</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">reimbursement prohibited, you have to spend it</td></tr>
<tr><td align="left">date</td><td align="left">1934 until now</td></tr>
</tbody></table>
<p><a href="https://archive.is/20130115184645/http://www.der-arbeitsmarkt.ch/arbeitsmarkt/de/themen/archiv/101176/WIR_sind_auch_Geld">source</a></p>
<h3><a class="header" href="#blaengarw-time-centre" id="blaengarw-time-centre">Blaengarw Time Centre</a></h3>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">hours of work</td></tr>
<tr><td align="left">issuance</td><td align="left">reward for community work</td></tr>
<tr><td align="left">backing</td><td align="left">community events that can be attended with time credits</td></tr>
<tr><td align="left">demurrage</td><td align="left">none</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">no reimbursement</td></tr>
<tr><td align="left">date</td><td align="left">2006 until now</td></tr>
</tbody></table>
<h2><a class="header" href="#references" id="references">References</a></h2>
<p>[1] People Money: The Promise of Regional Currencies, Margrit Kennedy, Bernard Lietaer, John Rogers, ISBN-13: 978-1908009760, 2012</p>
<h1><a class="header" href="#on-saving-loans-and-interest" id="on-saving-loans-and-interest">On Saving, Loans and Interest</a></h1>
<blockquote>
<p>If you ask me what is the worst thing in the world, I will say it is compound interest</p>
</blockquote>
<p>said Olusegun Obasanjo, president of Nigeria, in August 2000 after the G8 Okinawa summit.</p>
<blockquote>
<p>All that we had borrowed up to 1985 or 1986 was around $5 billion and we have paid about $16 billion yet we are still being told that we owe about $28 billion. That $28 billion came about because of the injustice in the foreign creditors’ interest rates.</p>
</blockquote>
<p>Compound interest makes debt grow exponentially, but nothing in nature grows exponentially forever. Sooner or later there will always be a saturation effect (usually modeled with an <a href="https://en.wikipedia.org/wiki/S-curve_(math)">S-curve</a>).</p>
<p>Even worse, our national money is <em>created</em> by commercial banks as credit, bearing compound interest. A priviledge for wealthy shareholders, which results in constantly growing debt and <a href="https://en.wikipedia.org/wiki/Growth_imperative#Monetary_system_and_the_role_of_positive_interest_rates">growth imperative</a>, an unsustainable way to design our economy.</p>
<p>Compound interest is also a major cause of inequality [1]. It ensures that rich are getting richer while the poor are getting poorer.</p>
<h2><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h2>
<p>A lender usually charges interest from the borrower. Besides giving the lender an income, interest also covers opportunity costs and compensates for the risk of the borrower defaulting on the loan.</p>
<p>It is beneficial to society if members with capital they can spare for a limited period of time provide their assets to members who need capital to build a business or suffer a temporary shortage.</p>
<p>In a society with a lot of social capital, lenders often provide their assets without a monetary incentive (or do you charge interest when borrowing money to a friend?). But this way of social lending does not scale well to larger loans.</p>
<p>Mutual credit is a way to better scale social credit beyond bilateral agreements (See WIR, LETS, RES). Interest-free credit is issued by clearing positive and negative balances when members trade, denominated in national currency. (See <a href="./economics-local-currencies.html">local currencies</a>)</p>
<h2><a class="header" href="#saving-is-no-virtue" id="saving-is-no-virtue">Saving Is No Virtue</a></h2>
<p>One of the main reasons we're saving is the fear that we might not be able to cover for our needs at some point in the future. UBI addresses this fear by promising a minimal unconditional income until our death. Insurance is another answer to this fear.</p>
<p>The act of accumulating capital is considered a main reason for the <a href="https://en.wikipedia.org/wiki/Growth_imperative#Monetary_system_and_the_role_of_positive_interest_rates">growth imperative</a> by [2]. </p>
<p>Saving is also motivated by the desire to become wealthy and better off than others. This desire conflicts with Encointer's goals of reducing inequality.</p>
<p>For all these reasons, the design of Encointer disincentivizes saving in favor of spending or investing locally.</p>
<h2><a class="header" href="#encointers-approach" id="encointers-approach">Encointer's Approach</a></h2>
<p>Holding Encointer currencies comes at high opportunity costs because of <a href="./economics-demurrage.html">demurrage</a>. This is an incentive to spend or lend money at no interest. However, it may appear more attractive to exchange all perishable money you don't immediately need for other assets outside the encointer ecosystem (national currency, shares, bonds, crypto assets). This investor flight would decrease the real value of encointer currencies.</p>
<p>Encointer allows businesses the issuance of vouchers that are not subject to demurrage. Vouchers are a transferrable promise to deliver goods or services sometime in the future. If they are transferrable, vouchers are nothing less than self-issued money. Vouchers can be <em>valid after</em> a certain date and therefore become credit. This credit is paid back by goods and services, not by money.</p>
<p>The <a href="https://www.independent.co.uk/news/business/delidollar-offers-route-to-business-funding-1071370.html">story of the <em>Deli Dollar</em></a> tells us how vouchers can be credit:</p>
<blockquote>
<p>Frank Tortoriello runs a deli in Great Barrington, Massachusetts. In 1989 he wanted to move to larger premises but the bank would not lend him the $4,500 he needed, so he simply printed his own money.
He did not forge dollar bills - he launched &quot;deli dollars&quot; which customers could buy for $8 and, at phased periods, cash in for $10 of food. He sold the lot in a month and raised $5,000. </p>
</blockquote>
<p><img src="./fig/DeliDollar.jpg" alt="DeliDollar Bill" />
With these vouchers, investors pay 8$ today instead of 10$ at some defined point in the future. This discount pleases the human <a href="https://en.wikipedia.org/wiki/Time_preference">time preference</a>. While this discount can be viewed as interest, it certainly isn't compound interest. It only applies once and its value is fixed. Still, it gives the investor an incentive to invest.</p>
<h2><a class="header" href="#references-1" id="references-1">References</a></h2>
<p><a href="https://link.springer.com/article/10.1007/s11403-019-00236-7">1</a> <em>Biondi et al, Inequality, mobility and the financial accumulation process: a computational economic analysis, Journal of Economic Interaction and Coordination, 2019</em></p>
<p><a href="https://www.mathias-binswanger.ch/index.php/books/274-derwachstumszwang">2</a> <em>Binswanger, Mathias (2019). Der Wachstumszwang: Warum die Volkswirtschaft immer weiterwachsen muss, selbst wenn wir genug haben. Wiley-CVH. p. 275. ISBN 978-3-527-50975-1.</em></p>
<h1><a class="header" href="#self-sovereign-identity-and-digital-personhood" id="self-sovereign-identity-and-digital-personhood">Self-Sovereign Identity and Digital Personhood</a></h1>
<blockquote>
<p>With self-sovereign identity (SSI) the individual identity holders can fully create and control their credentials, without being forced to request permission of an intermediary or centralised authority and gives control over how their personal data is shared and used. <em>Wikipedia</em></p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Self-sovereign_identity">SSI</a> is a key building block for any decentralized ecosystem. To establish trust online, we need to be able to present verifyable credentials to any counterparty of our choice. With SSI we can prove our name, residence, citizenship, diplomas online.</p>
<blockquote>
<p>While identity is about distinguishing one person from another through attributes or affiliations, personhood is about giving all real people inalienable digital participation rights independent of identity, including protection against erosion of their democratic rights through identity loss, theft, coercion, or fakery</p>
</blockquote>
<p><a href="https://arxiv.org/pdf/2011.02412.pdf">Ford2020</a></p>
<h1><a class="header" href="#digital-personhood" id="digital-personhood">Digital Personhood</a></h1>
<p>The <a href="./protocol.html">Encointer protocol</a> provides a decentralized <a href="https://en.wikipedia.org/wiki/Sybil_attack">sybil-defense</a> mechanism. Because each human can only be in one place at one time, Encointer provides each human with a <em>singular</em> proof of attendance for every ceremony attended. We call this a  unique-proof-of-personhood (uPoP). This uPoP is used for sybil-attack mitigation for <a href="./economics-ubi.html">Encointer's universal basic income</a>, but can also be useful for other use cases as described below.</p>
<h2><a class="header" href="#privacy-considerations" id="privacy-considerations">Privacy Considerations</a></h2>
<p>With Encointer, users may maintain different identities on different platforms. The Encointer uPoP can be used to ensure one human only maintains one ID on one specific platform with a high degree of anonymity.</p>
<h2><a class="header" href="#sybil-defense-for-social-media" id="sybil-defense-for-social-media">Sybil-Defense for Social Media</a></h2>
<p>Let's assume a decentralized social media platform like <a href="https://subsocial.network/">subsocial</a> enforces all its users to maintain only one account per human and prevents sybil attack with Encointer uPoP.</p>
<p>Alice Smith registers on subsocial with an alter ego of Sophie Summers because she doesn't want her presence on subsocial to be easily linkable to her physical world identity. Upon registration, subsocial would send a challenge to Alice to provide a uPoP. This challenge includes </p>
<ul>
<li>a platform token identifying subsocial (must be unique for subsocial)</li>
<li>a timestamp (or at least a ceremony index)</li>
<li>a confidence threshold (like: <em>must prove attendance for N of the last M encointer ceremonies</em>)</li>
<li>a list of trusted community identifers (can be restricted to a region to also provide plausibility of location of residence) Encointer will itself attempt to maintain a <a href="ssi.html#Community-Web-of-Trust">web-of-trust score for communities</a> which can be referenced instead.</li>
</ul>
<p>Alice now requests her uPoP for subsocial from the Encointer platform. Encointer maintains a registry of attested attendance for all recent ceremonies. Alice is represented in this registry by changing pseudonyms for every ceremony. These pseudonyms are public keys and she now has to provide evidence that she knows all private keys for all pseudonyms she claims. </p>
<p>Given that Alice can prove attendance of the requested N of the last M ceremonies, Encointer provides a uPoP to be sent to subsocial in the form of a verifiable credential signed by one encointer-worker enclave's signing-key. Encointer then stores the subsocial platform token along with Alice's ceremony attendance attestations. Should Alice attempt to claim the same ceremony attendances again for another account on subsocial, Encointer would deny to provide a uPoP.</p>
<p>uPoPs need to be renewed over time because an adversary could register an additional account every few months otherwise.</p>
<p>Now imagine Sophie Summers becomes a victim of cyberbullying and Alice wants to drop that identity and create a new one under the name of Maria Gonzales. She will have to attend a few encointer ceremonies without claiming the attendance with subsocial. After a few months, she can register a new account on subsocial because she has collected enough unlinked evidence.</p>
<h2><a class="header" href="#community-web-of-trust" id="community-web-of-trust">Community Web of Trust</a></h2>
<p>The <a href="./protocol.html">Encointer protocol</a> builds communities based on trusted setups involving well-known people in every community. On a community level, this trusted setup is the root of trust. On a global level, these people may not be known nor trusted and communities will not trust each other blindly. Adversaries might maintain bot communities in the middle of the pacific. </p>
<p>Encointer can leverage an economic incentive to build a web-of-trust (WoT) among communities: Encointer issues local currencies. Communities that trade with each other will exchange their local currencies frequently in both directions on a decentralized exchange (DEX). Based on a few trusted seed communities that act as a root of trust (one per country, continent, world), the whole world may become linkable in a single WoT given geographically dense adoption of Encointer.</p>
<h2><a class="header" href="#polkadot-parachain-personhood-service" id="polkadot-parachain-personhood-service">Polkadot Parachain Personhood Service</a></h2>
<p>Should Encointer become a common good parachain of Polkadot, it could provide proofs of digital personhood to other parachains through cross-chain communication. As uPoP will be signed by SGX enclaves, a client parachain needs a trustelss way to query the enclave registry to verify a uPoP.</p>
<p><a href="https://wiki.polkadot.network/docs/en/learn-crosschain">XCMP</a> can be used to verify a certain enclave is registered as an encointer-worker and has passed remote attestation on the encointer platform.</p>
<p>Please see our <a href="https://www.youtube.com/watch?v=Fw2dalJO1hM">sybil-defense demo video</a> to learn how sybil defense works within the Polkadot ecosystem of parachains.</p>
<h1><a class="header" href="#encointer-protocol" id="encointer-protocol">Encointer Protocol</a></h1>
<p>The <em>Encointer protocol</em> is what ensures that</p>
<ul>
<li>only humans get a UBI</li>
<li>every human can only get it once</li>
</ul>
<p>We call the result of this protocol a <em>unique proof of personhood</em>.</p>
<p>Encointer leverages the fact that every person can only be in one place at one time. Every 41 days, participants are requested to attend physical key-signing meetups with small groups of random people. Because all meetups happen as one global ceremony all on the same day at the same local time, no one can attend two meetups.</p>
<p>The formal definition of the protocol can be found in our <a href="https://github.com/encointer/whitepaper/raw/master/encointer_whitepaper.pdf">whitepaper</a></p>
<h1><a class="header" href="#threat-model" id="threat-model">Threat Model</a></h1>
<h2><a class="header" href="#actor-profiles" id="actor-profiles">Actor Profiles</a></h2>
<p>We categorize users into the following psychological profiles for later scenario analysis:</p>
<h3><a class="header" href="#honest-img-srcfigemoji_innocent_1f607svg-width64" id="honest-img-srcfigemoji_innocent_1f607svg-width64">Honest <img src=./fig/emoji_innocent_1F607.svg width=64></a></h3>
<p>Will comply with the rules</p>
<h3><a class="header" href="#greedy-img-srcfigemoji_devil_1f47fsvg-width64" id="greedy-img-srcfigemoji_devil_1f47fsvg-width64">Greedy <img src=./fig/emoji_devil_1F47F.svg width=64></a></h3>
<p>Will try to cheat the system for his/her own benefit. Will collude with others</p>
<p>Strategies:</p>
<ul>
<li>Get reward without showing up</li>
<li>Sign sybil id's to collect more rewards</li>
</ul>
<h3><a class="header" href="#saboteur-img-srcfigemoji_angry_1f621svg-width64" id="saboteur-img-srcfigemoji_angry_1f621svg-width64">Saboteur <img src=./fig/emoji_angry_1F621.svg width=64></a></h3>
<p>Will try to hurt the system, even if this comes at a cost. Will collude with others</p>
<p>Strategies:</p>
<ul>
<li>turn meetups invalid</li>
<li>demoralize other participants by preventing them to get reward</li>
</ul>
<h2><a class="header" href="#more-roles" id="more-roles">More Roles</a></h2>
<h3><a class="header" href="#sybil-img-srcfigemoji_alien_1f47dsvg-width64" id="sybil-img-srcfigemoji_alien_1f47dsvg-width64">Sybil <img src=./fig/emoji_alien_1F47D.svg width=64></a></h3>
<p>An identity that has no bijectively exclusive relationship with a participant. It can however have a bijectively exclusive relationship with a person who doesn't attend any meetup.</p>
<h3><a class="header" href="#manipulable-img-srcfigemoji_hearts_1f970svg-width64" id="manipulable-img-srcfigemoji_hearts_1f970svg-width64">Manipulable <img src=./fig/emoji_hearts_1F970.svg width=64></a></h3>
<p>An honest person that can be convinced to break the rules by social pressure. Will not strive for economic benefit.</p>
<h2><a class="header" href="#collusion-organizations" id="collusion-organizations">Collusion Organizations</a></h2>
<h3><a class="header" href="#evilcorp" id="evilcorp">evil.corp</a></h3>
<p>An organization of the greedy or saboteur participants. </p>
<p>Strategies: </p>
<ul>
<li>undermining randomization by sharing information and key pairs to allow collusion attacks at meetups</li>
</ul>
<h1><a class="header" href="#assumptions" id="assumptions">Assumptions</a></h1>
<p>We assume </p>
<ol>
<li>The majority of ceremony participants with reputation sending their signed claims to the blockchain location is honest.</li>
</ol>
<p><em>Reputation</em> here means having attended at least one of the last two ceremonies and having been rewarded.</p>
<h1><a class="header" href="#rule-design" id="rule-design">Rule Design</a></h1>
<p>When designing rules there's a tradeoff beween preventing either the greedy or the saboteur's success. We can introduce very restrictive rules that will successfully prevent sybil attacks by the greedy, but these will make it very easy for the saboteur to demoralize participants by turning meetups invalid deliberately.</p>
<h2><a class="header" href="#rules" id="rules">Rules</a></h2>
<p>TODO: This is work in progress....</p>
<h3><a class="header" href="#meetup-assignment" id="meetup-assignment">Meetup Assignment</a></h3>
<ol>
<li>A meetup has at least <font color="green">3</font> assigned participants</li>
<li>A meetup has at most <font color="green">12</font> assigned participants</li>
<li>Only <font color="green">1/4</font> of assigned participants may have zero reputation (be newcomers)
<ul>
<li><em>this rule directly impacts the maximum adoption rate. A population of 1M will take at least</em> log(1M/12)/log(4/3) &lt;= 40 ceremonies </li>
</ul>
</li>
</ol>
<h3><a class="header" href="#meetup-validation" id="meetup-validation">Meetup validation</a></h3>
<ol>
<li>(NEEDED?) The signature <a href="https://en.wikipedia.org/wiki/Reciprocity_(network_science)">reciprocity</a> is at least <font color="green">X</font></li>
<li>(NEEDED?) The reciprocal edge connectedness is at least M-2, where M is the number of participants with at least one signature by another party.</li>
<li>(OK) At least <font color="green">two</font> participants signed each other mutually</li>
<li>(OK) Disqualify a participant if her vote is not equal to the number of participants signed by her.</li>
</ol>
<h3><a class="header" href="#ubireward-issuance" id="ubireward-issuance">UBI/Reward Issuance</a></h3>
<p>In order to receive a UBI, a participant </p>
<ol>
<li>(OK) must be registered and assigned to the meetup</li>
<li>(OK) the meetup must be valid</li>
<li>(TODO: ARGUE THRESHOLD) must have her claim signed by at least <font color="green">1/3</font> of registered participants</li>
<li>(OK) must have signed the participants that are necessary to fulfill rule above in return</li>
</ol>
<h1><a class="header" href="#remote-attacks" id="remote-attacks">Remote Attacks</a></h1>
<h2><a class="header" href="#flooding-attack" id="flooding-attack">Flooding Attack</a></h2>
<p>An adversary could register large numbers of fake participants who will never show up. This could prevent legit persons to participate.</p>
<p>Mitigation: </p>
<ul>
<li>Limit the number of assigned participants with no reputation</li>
</ul>
<h1><a class="header" href="#non-protocol-threats" id="non-protocol-threats">Non-Protocol Threats</a></h1>
<h2><a class="header" href="#aggression-detention" id="aggression-detention">Aggression, Detention</a></h2>
<p>If meetup locations are publicly known, participants could face aggression from saboteurs or they could be detained if participation is suddenly judged illegal.</p>
<p>Mitigation: </p>
<ul>
<li>The set of possible meetup locations has to be significantly larger than the need in order to host all participants.</li>
</ul>
<h2><a class="header" href="#abduction" id="abduction">Abduction</a></h2>
<p>If celebrity meetup participants can be linked to their names and meetup locations in advance, they might get kidnapped</p>
<p>Mitigation: </p>
<ul>
<li>Make sure meetup assignments are kept confidential at least until the meetup has passed.</li>
</ul>
<h1><a class="header" href="#behavioural-meetup-scenario-analysis" id="behavioural-meetup-scenario-analysis">Behavioural Meetup Scenario Analysis</a></h1>
<p>The scenario analysis is structured by the number of participants who were assigned to a meetup</p>
<h2><a class="header" href="#3-registered-participants" id="3-registered-participants">3 Registered Participants</a></h2>
<h3><a class="header" href="#happy-flow" id="happy-flow">Happy Flow</a></h3>
<p>All participants only sign for persons present at meetup location. </p>
<p><img src="./fig/meetup_3r_3i.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>Noshow of one is treated with mercy for attendees</p>
<p><img src="./fig/meetup_3r_2i1s_1noshow.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 1
</code></pre>
<h3><a class="header" href="#attacks" id="attacks">Attacks</a></h3>
<h4><a class="header" href="#social-engineering" id="social-engineering">Social Engineering</a></h4>
<p>Adversary B talks A into signing his sybil ID</p>
<p><img src="./fig/meetup_3r_1m1d1a.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>As there is no honest participant in this meetup, this attack is out of scope of our threat model.</p>
<p>Mitigation</p>
<ul>
<li>randomized meetups should reduce the chance that someone could be assigned with his sybil to the same meetup. In weakly populated areas, this can happen easily though</li>
</ul>
<p><em>this scenario violates threat model assumptions</em></p>
<h4><a class="header" href="#exclusion" id="exclusion">Exclusion</a></h4>
<p>Adversary B refuses to sign A and signs C instead</p>
<p><img src="./fig/meetup_3r_1i1d1a.svg" alt="" /></p>
<p>A variant of this would be that B isn't even present at the meetup</p>
<pre><code>reciprocity = 0.5 (1.0)
reciprocal edge connectedness = 1
</code></pre>
<p>Mitigation <strong>none</strong></p>
<ul>
<li>randomized meetups should reduce the chance that someone could be assigned with his sybil to the same meetup. In weakly populated areas, this can happen easily though. evil.corp could also increase chances.</li>
<li>Only allow meetups with more participants (&gt;=4?) in order to reduce the impact of a single participant on outcome.</li>
</ul>
<p><em>this scenario violates threat model assumptions</em></p>
<h2><a class="header" href="#4-registered-participants" id="4-registered-participants">4 Registered Participants</a></h2>
<h3><a class="header" href="#oversigning" id="oversigning">Oversigning</a></h3>
<p><img src="./fig/meetup_4r_1i2d1a.svg" alt="" /></p>
<p>Variant:</p>
<ul>
<li>B and C are not present at meetup, removing the reciprocal edges to A</li>
</ul>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>Mitigation: </p>
<ol>
<li>(NOK) Introduce <strong>Reputation</strong> (previous attendance to successful meetups)</li>
<li>(NOK) Introduce Rule <em>&quot;lowest vote with reputation wins&quot;</em>
* This rule, however, will cause B, C, and D to vote &quot;3&quot; showups and to refuse to sign A. Reputation doesn't help because B and C could have reputation as well.</li>
<li>(NEEDED?) quarantine non-consistent meetups</li>
</ol>
<p>At this meetup, 3/4 of registered participants are malicious.</p>
<p><em>this scenario violates threat model assumptions</em></p>
<h3><a class="header" href="#oversigning-light" id="oversigning-light">Oversigning light</a></h3>
<p><img src="./fig/meetup_4r_2i1d_1a.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 1
</code></pre>
<p>Mitigation</p>
<ul>
<li>only accept subgraph with recipr. edge connectedness of M-2 for M=4 here. This will cut off D.</li>
</ul>
<h3><a class="header" href="#location-spoofing" id="location-spoofing">Location Spoofing</a></h3>
<p><img src="./fig/meetup_4r_2i1d1a.svg" alt="" /></p>
<p>C and D could pretend to be at the meetup location. The ceremony validation has no way to know if A-B is legit or C-D.</p>
<p>Variants:</p>
<ul>
<li>D could be a real person colluding with C</li>
</ul>
<p>Probability:</p>
<ul>
<li>low because of randomization if number of meetups assigned is high
<ul>
<li>evil.corp could redistribute sybil id's after meeting assignments, undermining randomization</li>
</ul>
</li>
</ul>
<p>Mitigation: </p>
<ol>
<li>(NOK) track participant locations and require plausible movement trajectories before meetup. <strong>not sound</strong> because it is easy for C+D to spoof realistic trajectories</li>
<li>(NEEDED?) Quarantine: The validator can detect that the meetup is split and therefore not consistent. Issuance could be conditional to future ceremony attendance</li>
<li>(OK) The pair with higher reputation wins, the other doesn't get a reward issued.</li>
<li>(NOK) invalidate non-consistent meetups, preventing 2 illegit rewards while demoralizing 2 honest participants.</li>
</ol>
<p>At this meetup, 1/2 of registered participants are malicious.</p>
<h2><a class="header" href="#5-registered-participants" id="5-registered-participants">5 Registered Participants</a></h2>
<p><img src="./fig/meetup_5r_2i1d_2a.svg" alt="" /></p>
<p>Mitigation:</p>
<ul>
<li>Disqualify participant if vote != number of peers she signed</li>
</ul>
<p><img src="./fig/meetup_5r_2i_1d2a.svg" alt="" /></p>
<p>Mitigation:</p>
<ul>
<li><em>none</em>, if C,E,D all have reputation. the majority can always win. </li>
</ul>
<p><em>This violates threat model assumption 1</em></p>
<h1><a class="header" href="#conclusion" id="conclusion">Conclusion</a></h1>
<p>As long as the threat model assumptions are held, we can find a set of rules that prevents:</p>
<ul>
<li>issuing more rewards than there are honest participants (while there is no guarantee that every honest participant will get a reward in face of malicious behaviour)</li>
</ul>
<p>The probability that you as a participant experience a meetup with evil majority follows the poisson cumulative distribution function:</p>
<p>Given the overall proportion of malicious actors , the probability that you (being an honest actor) will suffer from malicious behaviour at one specific meetup depending on the number of participants in your meetup <em>n</em> is</p>
<p><a href="./fig/probability_of_malicious_majority.m">code</a>
<img src="./fig/probability_of_malicious_majority.svg" alt="" /></p>
<h1><a class="header" href="#decentralization" id="decentralization">Decentralization</a></h1>
<p>Decentralization can mean very different things and is never black and white but rather a goal that can never be fully achieved. Encointer aims at</p>
<ul>
<li><strong>architectural decentralization:</strong> avoid a single point of failure through redundancy (different machines in different geographic locations)</li>
<li><strong>political decentralization:</strong> distribute control among many individuals and organizations</li>
<li><strong>logical decentralization:</strong> ensure that the system can continue to exist if it is divided into arbitrary subgroups</li>
</ul>
<p>The first two are common for blockchains. Logical decentralization, however, isn't a feature of global blockchains. There may only be one truth globally. Encointer, on the other hand, can be split into its shards of local communities and continue to exist - with restrictions on finality and interoperability. This way, Encointer could even continue to exist in countries that eclipse their citizens from the internet or selective parts of it. At least temporarily.</p>
<p>Over all, <em>resilience</em> is what we aim for.</p>
<h2><a class="header" href="#blockchain" id="blockchain">Blockchain</a></h2>
<p>Why does Encointer need a blockchain? All the economic aspects could be implemented with a central server as well. </p>
<p>We develop the Encointer software with altruistic intentions. Still, Encointer may likely be judged as unlawful in certain juristictions and repression may follow. If a trusted entity would operate Encointer as a service, that system would be very vulnerable to states or other economically powerful entities.</p>
<p>P2P systems, including blockchains, have proven to be very resilient versus state intervention. </p>
<h2><a class="header" href="#consensus-and-security" id="consensus-and-security">Consensus and Security</a></h2>
<p>On Blockchains, code is law. This law needs to be secured against malicious attacks. While the security of the bitcoin blockchain is measured in mining hashpower, the security of PoS chains like Polkadot is measured in staked capital. Both approaches boild down to the simple rule: <em>the &quot;biggest&quot; blockchain is the most secure</em>.</p>
<p>As Encointer is no business case or speculative asset by design, it needs to rely on other things than capital or hashpower for security of consensus. </p>
<p>Thanks to its proof-of-personhood, Encointer could apply democratic consensus like described in <a href="http://bford.info/pub/dec/pop.pdf">PoPcoin</a>.
However, a web of trust would have to be established first.</p>
<p><a href="https://polkadot.network/">Polkadot</a> is a heterogeneous multi-chain system with shared security. While this approach reduces the amount of capital Encointer would have to bind for equal security, it still is a profoundly capitalistic system and competition around parachain slots may make it impossible for Encointer to become a <a href="https://wiki.polkadot.network/docs/en/learn-parachains">Polkadot parachain</a>. </p>
<p>While the final solution is yet to be discovered, Encointer will start off as a proof-of-authority (PoA) chain which is initially operated by trusted entities. The worker registry, however, will be permissionless. Anyone with a suitable TEE will be able to operate workers for communities of their choice.</p>
<p>Once possible, Encointer will attempt to become a parachain of Polakdot or Kusama by means of crowdfunding.</p>
<p>Should this fail, it can still get finality for its PoA consensus by running as a <a href="https://wiki.polkadot.network/docs/en/learn-parathreads">parathread</a> instead.</p>
<h2><a class="header" href="#governance" id="governance">Governance</a></h2>
<p>Encointer is no static system. It shall evolve over time and different communities shall be able to adjust their local rules independently. Such a foederalistic governance is possible thanks to Encointers' <a href="./ssi.html">self-sovereign identity (SSI) features</a>.  Encointer's proof-of-personhood allows to have democratic voting. Its proof-of-location ensures that people can only vote on matters concerning their local community. This local governance shall rule over the parameters of individual community currencies, such as defining meetup locations, changing the <a href="./economics-demurrage.html">demurrage rate</a>, changing the <a href="./economics-ubi.html">UBI</a> amount or the name of their currency.</p>
<p>Global governance shall leverage the <a href="./ssi.html#community-web-of-trust">web-of-trust among communities</a>. Democratic votes are thus weighted with the trust score of each community. Global governance shall decide on updates to the blockchain logic and global parameter such as the ceremony period, the set of trusted TEE manufacturers or the distribution of fees.</p>
<h2><a class="header" href="#privacy" id="privacy">Privacy</a></h2>
<p>Encointer protects its users' privacy by design:</p>
<ul>
<li>transfers of local community currencies are private by default. No one learns who sends how much to whom.</li>
<li>account balances of local community currencies are private (while aggregated values such as a community's total issuance and turnover are public)</li>
<li>ceremony meetup assignments are processed confidentially because that strenghtens the Encointer protocol by hindering collusion. </li>
</ul>
<h3><a class="header" href="#philosophy" id="philosophy">Philosophy</a></h3>
<p>Privacy can also be a threat to communities. There is a good reason why most nation states enforce anti money laundering (AML) laws. Encointer aims to follow a simple rule: <strong>The smaller the amounts, the higher the privacy should be. And vice versa - the higher the amounts, the higher the transparency should be</strong>. This - unfortunately - is pretty much the opposite of what we experience in today's reality as big capital and gains can easily be offshored and obscured while everyday purchases are traced down to the penny.</p>
<p>As encointer is made up of many small communities - none of which will have a significant market capitalization on a global scale - it will never be easy to move great amounts of capital through these local currencies unnoticed. That's why Encointer simply is not an attractive channel for laundering money.</p>
<h1><a class="header" href="#testnets" id="testnets">Testnets</a></h1>
<p>Encointer maintains two testnets: Gesell and Cantillon.</p>
<p>The networks differ in their goals and designs:</p>
<h2><a class="header" href="#gesell" id="gesell">Gesell</a></h2>
<p>Aimed at automated testing of the protocol and our <a href="./app.html">mobile phone app</a>.</p>
<ul>
<li>Time-warping allows to script bot populations and hold ceremonies every 30min.</li>
<li>Complete transparency of all registries and balances. Everything happens on-chain.</li>
<li>experimenting with real ceremony meetups, physically meeting people.</li>
</ul>
<h2><a class="header" href="#cantillon" id="cantillon">Cantillon</a></h2>
<p>The main purpose of Cantillon is privacy enhancement through Trusted Execution environments (with enclaves still in development mode, so privacy is not guaranteed before we move to production mode)</p>
<p>Watch our <a href="https://youtu.be/X1Zb68Z1fac">demo video on bootstrapping a bot community</a></p>
<h2><a class="header" href="#outlook-on-mainnet" id="outlook-on-mainnet">Outlook on Mainnet</a></h2>
<p>The mainnet is planned to become a parachain of <a href="https://kusama.network/">Kusama</a>, the canary network of <a href="https://polkadot.network/">Polkadot</a>. The chain security will depend on Kusama relay chain.</p>
<h2><a class="header" href="#time-warping-for-testnets" id="time-warping-for-testnets">Time Warping for Testnets</a></h2>
<p>In order to understand the different timing on our networks, we offer the following figure:</p>
<p><img src="./fig/phase-timing.svg" alt="Phase Timing" /></p>
<ul>
<li>Temporarily, we will apply 30min ceremony cycle to both Gesell and Cantillon*</li>
</ul>
<h1><a class="header" href="#testnet-gesell" id="testnet-gesell">Testnet Gesell</a></h1>
<p>Gesell is our first testnet. It allows you to bootstrap new local currencies and perform regular proof-of-personhood ceremonies that give participants a universal basic income. This network is meant for testing with bot populations in order to audit and stress-test the protocol. Gesell does not give you the privacy that later networks will provide. We do not expect real physical meetups to happen on this network except occasional demo meetups. </p>
<h2><a class="header" href="#design" id="design">Design</a></h2>
<p>Gesell is based on <a href="https://substrate.dev/">substrate</a> and its nodes consist of four <em>pallets</em></p>
<p><img src="./fig/Testnet-Gesell-Component-Interactions.svg" alt="Gesell" /></p>
<h3><a class="header" href="#scheduler" id="scheduler">Scheduler</a></h3>
<p>Keeps track of time and maintains the ceremony state-machine phase changes.</p>
<h3><a class="header" href="#currencies" id="currencies">Currencies</a></h3>
<p>Registry for all local currencies with their properties and meetup locations</p>
<h3><a class="header" href="#balances" id="balances">Balances</a></h3>
<p>The individual's account balances in all currencies, featuring <a href="./economics-demurrage.html">demurrage</a>.</p>
<h3><a class="header" href="#ceremonies" id="ceremonies">Ceremonies</a></h3>
<p>Where participants register for ceremonies. Assignment of meetups and issuance of UBI upon proof-of-personhood.</p>
<h1><a class="header" href="#testnet-gesell-tutorial" id="testnet-gesell-tutorial">Testnet Gesell Tutorial</a></h1>
<h2><a class="header" href="#connect" id="connect">Connect!</a></h2>
<p>You may watch Gesell working by navigating to <a href="https://polkadot.js.org/apps//?rpc=wss://gesell.encointer.org#/explorer">polkadot.js.org/apps</a>. </p>
<p>Gesell features regular ceremonies every 30min (Whereas the vision for mainnet is every 41 days). You can query the current ceremony phase below the menu <em>Developer -&gt; Chain State</em></p>
<p><img src="./fig/polkadot-js-apps-query-phase.png" alt="query phase" /></p>
<p>Registering means that participants can now register for the next ceremony</p>
<h2><a class="header" href="#test-physical-meetup" id="test-physical-meetup">Test Physical Meetup</a></h2>
<p>First, install our <a href="app.html">app</a> on at least three mobile phones and create individual accounts</p>
<p><a href="deployments-register-community.html">Register a new community</a> with the new accounts as bootstrappers</p>
<p>Now, register all participants during REGISTERING phase and perform meetups during ATTESTATION phase. </p>
<h1><a class="header" href="#testnet-cantillon" id="testnet-cantillon">Testnet Cantillon</a></h1>
<p>** DISCONTINUED **</p>
<p>Cantillon was the testnet to showcase the privacy features using trusted execution environments with <a href="https://integritee.network">Integritee technology</a></p>
<p>It is still on our roadmap to include these features, but currently, the focus lies on running a <a href="./parachain-kusama.html">common good parachain on Kusama</a></p>
<h2><a class="header" href="#design-1" id="design-1">Design</a></h2>
<p>Cantillon uses the same pallets as Gesell, but the privacy-sensitive ones will be executed off-chain, inside a trusted execution environment (TEE). <a href="https://github.com/scs/substraTEE">SubstraTEE</a> will be the framework that isolates sensitive information inside Intel SGX enclaves (Alternative TEE technologies are being evaluated)</p>
<p><img src="./fig/Testnet-Cantillon-Component-Interactions.svg" alt="Cantillon" /></p>
<h1><a class="header" href="#encointer-kusama-parachain" id="encointer-kusama-parachain">Encointer Kusama Parachain</a></h1>
<p>Encointer's productive mainnet is planned run as a common good parachain on Kusama.</p>
<p>More info coming...</p>
<h1><a class="header" href="#how-to-register-an-encointer-community-manually" id="how-to-register-an-encointer-community-manually">How to Register an Encointer Community (manually)</a></h1>
<p>For simplicity, we'll create an alias for the chain client</p>
<pre><code class="language-console"># Gesell node endpoint
NURL=wss://gesell.encointer.org
NPORT=443
alias nctr=&quot;./target/release/encointer-client-notee -u $NURL -p $NPORT&quot;
</code></pre>
<p>For the local chain, remove the NURL and modify the NPORT accordingly. 
Then create some accounts (at least 3): </p>
<pre><code>&gt; nctr new-account
5D5V3couq7o42FYkLG4vVhaqQPrfk4NT3kWzZJH66ZeHr3iG
&gt; nctr new-account
5HB4kbo67Hgv846DNMRnt7i1xNMum66LLBFkqtghKsNwRknM
&gt; nctr new-account
5GxWKwbrPL88uH3Zv7zAiz6ozdpSFHzSfK1aXhVxDcNQYU8t
</code></pre>
<p>Note: the displayed account addresses will differ from yours when you follow the tutorial. They are just provided for readabiltiy. Use your account addresses instead of the ones used in the tutorial. </p>
<p>Secure funds for the accounts with the faucet:</p>
<pre><code>&gt; nctr faucet 5D5V3couq7o42FYkLG4vVhaqQPrfk4NT3kWzZJH66ZeHr3iG \ 5HB4kbo67Hgv846DNMRnt7i1xNMum66LLBFkqtghKsNwRknM \ 5GxWKwbrPL88uH3Zv7zAiz6ozdpSFHzSfK1aXhVxDcNQYU8t
</code></pre>
<p>To register a community, you need to pass a specfile.json containing details about the community and an account with funds to the chain client. </p>
<h2><a class="header" href="#meetup-locations" id="meetup-locations">Meetup Locations</a></h2>
<p>We need to define in what region the community shall be issued. For this we use the geojson standard to define a set of meetup places and add some meta-information about the community. You can use <a href="https://geojson.io">geojson.io</a> to select meetup places on a map (define a few &quot;Points&quot;). Make sure that you select places that are &gt;100m apart. You also need to keep this minimal distance from other registered communities. 
If you want to be sure which location will be the bootstrapping location, please specify only a single location and register more locations after the bootstrapping ceremony</p>
<p>The number of locations that you should define depends on the size of the population N you'd like to bootstrap. As a rule of thumb, there should be at least N locations in order to guarantee reasonable randomization. As a maximum of 12 people can attend the same meetup the hard lower limit is N/12. </p>
<p>You can list all registered communities with:</p>
<pre><code class="language-bash">&gt; nctr list-communities
</code></pre>
<p>Our <a href="https://explorer.encointer.org">explorer</a> allows you to browse all regsitered communities and their attributes on a map.</p>
<h2><a class="header" href="#trusted-setup" id="trusted-setup">Trusted Setup</a></h2>
<p>Every local community needs a trusted setup. A trustworthy group of 3-12 local people will hold the bootstrapping ceremony publicly. These bootstrappers need to be defined in the metadata block of the specfile. </p>
<p>An example of the specfile.json is shown below with one meetup locations:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;community&quot;: {
    &quot;meta&quot;: {
      &quot;name&quot;: &quot;Mediterranea&quot;,
      &quot;symbol&quot;: &quot;MTA&quot;,
      &quot;icons&quot;: &quot;QmVmew4gZHyCK2Fv4UBgsvfLdf1Q6UiF9MD6wsfPCuNVQp&quot;
    },
    &quot;bootstrappers&quot;: [
      &quot;5D5V3couq7o42FYkLG4vVhaqQPrfk4NT3kWzZJH66ZeHr3iG&quot;,
      &quot;5HB4kbo67Hgv846DNMRnt7i1xNMum66LLBFkqtghKsNwRknM&quot;,
      &quot;5GxWKwbrPL88uH3Zv7zAiz6ozdpSFHzSfK1aXhVxDcNQYU8t&quot;
    ]
  },
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Point&quot;,
        &quot;coordinates&quot;: [
          -28.102619,
          31.141935
        ]
      },
      &quot;properties&quot;: {}
    }
  ]
}
</code></pre>
<p>Note: replace the account addresses in &quot;bootstrappers&quot; with the ones you have created and add additional meetup locations.</p>
<p>Use one of the bootstrappers to register your new community with the specfile.json:</p>
<pre><code class="language-bash">&gt; nctr new-community specfile.json 5D5V3couq7o42FYkLG4vVhaqQPrfk4NT3kWzZJH66ZeHr3iG
A9xSvDWnV351uKh5Ni59xFwU2Q3t37J7MMp8tN2Gya9D
</code></pre>
<p>Your community has been registered and the return value is your community-identifier (cid). Let's check the registry again:</p>
<pre><code class="language-bash">&gt; nctr list-communities
number of communities:  1 
A9xSvDWnV351uKh5Ni59xFwU2Q3t37J7MMp8tN2Gya9D: Mediterranea locations: 1
</code></pre>
<h1><a class="header" href="#bazaar" id="bazaar">Bazaar</a></h1>
<p>What is a local currency without the possibility to spend it on desired goods and services? How can you find businesses that accept the local Encointer currency? Encointer features a builtin classifieds system for advertizing businesses and offerings we call <em>bazaar</em>.</p>
<p>Anyone can register businesses and offerings to be advertized within their local community. All metadata and images for classifieds are stored on <a href="https://ipfs.io/">ipfs</a>. The ownership of classifieds is registered on the Encointer blockchain.</p>
<h2><a class="header" href="#vouchers" id="vouchers">Vouchers</a></h2>
<p>Every business may issue their own transferrable vouchers and can therefore issue their own loyalty money or <a href="./economics-interest.html">acquire loans from the community</a>. As businesses are owned by real people whose digital personhood has been attested at Encointer ceremonies, these vouchers come with a sybil-defense and the credit rating of businesses is immutably recorded.</p>
<h1><a class="header" href="#encointer-wallet-app" id="encointer-wallet-app">Encointer Wallet App</a></h1>
<img src=https://raw.githubusercontent.com/encointer/encointer-wallet-flutter/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.png height=500/>
<p>The Encointer app is all that users need to participate in a local community. It serves as a wallet and lets you participate in Encointer ceremonies.</p>
<h2><a class="header" href="#install" id="install">Install</a></h2>
<h3><a class="header" href="#android" id="android">Android</a></h3>
<p><a href="https://f-droid.org/packages/org.encointer.wallet/"><img src="https://fdroid.gitlab.io/artwork/badge/get-it-on.png"
     alt="Get it on F-Droid"
     height="55"></a></p>
<p><a href="https://play.google.com/store/apps/details?id=org.encointer.wallet"><img src="https://play.google.com/intl/en_us/badges/images/generic/en-play-badge.png"
     alt="Get it on Google Play"
     height="55"></a></p>
<h3><a class="header" href="#ios" id="ios">iOS</a></h3>
<p><a href="https://apps.apple.com/us/app/encointer-wallet/id1535471655?itsct=apps_box_badge&amp;itscg=30200" style="display: inline-block; overflow: hidden; border-radius: 13px; width: 250px; height: 83px;"><img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&amp;releaseDate=1619049600&h=f616bcfbdbf4c04f0ca6524a2a683d4b" alt="Download on the App Store" style="border-radius: 13px; width: 250px; height: 83px;"></a></p>
<h3><a class="header" href="#kaios" id="kaios">KaiOS</a></h3>
<p>Feature phone support planned in the future</p>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p><a href="https://www.youtube.com/watch?v=tcgpCCYBqko">Watch our ceremony video</a> to learn what you can do with our app.</p>
<p>Currently, the app supports Gesell. In order to perform a physical meetup with other people, you should:</p>
<ol>
<li>Install the <em>Encointer Wallet</em> app and create a new account. Do this on at least three phones and collect account addresses. </li>
<li>On the <em>Wallet</em> tab, tap the <em>faucet</em> symbol and we'll send you some gas tokens (ERT)</li>
<li>Register your new local currency along our <a href="testnet-gesell-tutorial.html">tutorial</a>. Use the newly created accounts as bootstrappers</li>
<li>Wait for the REGISTERING phase and register your accounts in the app on the <em>ceremonies</em> tab</li>
<li>Wait for the ASSIGNING phase and observe how the app tells you when to be where for the meetup (Meetup time will always be incorrect for Testnet Gesell and can be ignored)</li>
<li>Wait for ATTESTING. Now you'll have 10min to perform a meetup with all registered phones. </li>
<li>Wait for REGISTERING phase. Check that you have been issued a universal basic income on the <em>Wallet</em> tab. You can send these funds to others now.</li>
</ol>
<h2><a class="header" href="#acknowledgements" id="acknowledgements">Acknowledgements</a></h2>
<p>Encointer Wallet is based on <a href="https://polkawallet.io">polkawallet.io</a></p>
<h1><a class="header" href="#explorer" id="explorer">Explorer</a></h1>
<p>The explorer is a Web UI tool to visualize chain data such as the communities and bootstrappers, the phases and ceremonies around the world.
A working example can be visited at <a href="https://explorer.encointer.org">explorer.encointer.org</a>.</p>
<p>Checkout the <a href="https://github.com/encointer/explorer">explorer repository</a>. <br>
In the terminal, go to the the root directory of the repo and enter: <br></p>
<pre><code class="language-console">git clone https://github.com/encointer/explorer
cd explorer
yarn install
yarn start
</code></pre>
<p>Then you should be able to view the explorer in your browser at http://localhost:8000/. <br>
At the bottom, the registered chain is displayed. You can click on it and change between the local and remote chain.
You can also set the rpc address via the query paramter, for example: <br>
<code>localhost:8000?rpc=ws://127.0.0.1:9945</code> will connect to the chain on localhost with port 9945. <br>
The registered community should be visible in the explorer.</p>
<h1><a class="header" href="#developers" id="developers">Developers</a></h1>
<p>This chapter includes information for developers who want to test the tech locally on their machines</p>
<h1><a class="header" href="#gesell-local-setup" id="gesell-local-setup">Gesell local setup</a></h1>
<p>Note: You can find more detailed instructions on how to build and run the node and cli client on the <a href="https://github.com/encointer/encointer-node">encointer-node repository</a>.</p>
<h2><a class="header" href="#build-node" id="build-node">Build node</a></h2>
<p>Clone the <a href="https://github.com/encointer/encointer-node">encointer-node repository</a> and cd into it:</p>
<pre><code class="language-console">git clone https://github.com/encointer/encointer-node.git
cd encointer-node
</code></pre>
<p>Install Rust: </p>
<pre><code class="language-console">curl https://sh.rustup.rs -sSf | sh
</code></pre>
<p>Build the node:</p>
<pre><code class="language-console">cargo build --release
</code></pre>
<h2><a class="header" href="#launch-gesell-node" id="launch-gesell-node">Launch Gesell node</a></h2>
<p>Run dev node locally</p>
<pre><code class="language-console">./target/release/encointer-node-notee --dev --tmp --enable-offchain-indexing true --rpc-methods unsafe
</code></pre>
<p><code>--dev</code> sets up a developer node <a href="https://substrate.dev/docs/en/knowledgebase/integrate/chain-spec">chain specification</a> </br>
<code>--tmp</code> saves all active data for the node (keys, blockchain database, networking info, ...) and is deleted as soon as you properly terminate your node. </br>
<code>--offchain-indexing</code> is needed for the custom rpc call <code>communities_getAll</code> </br>
<code>--rpc-methods unsafe</code> is needed for the bazaar's business and offering aggregation rpcs. </br>
The node is by default listening on port 9944, but you can add the option <code>--ws-port xxxx</code> to configure the node to listen to port xxxx.</p>
<h2><a class="header" href="#cli-client" id="cli-client">CLI Client</a></h2>
<p>After the node is running, try out the client (from the root folder of the encointer-node repository):</p>
<pre><code class="language-console">./target/release/encointer-client-notee -h
</code></pre>
<p>This should output all possible client commands. </p>
<p>If you want to use the client to communicate with the remote chain, add the chain url and specify the port. The following command will get the current phase from the remote chain.</p>
<pre><code class="language-console">./target/release/encointer-client-notee -u wss://gesell.encointer.org -p 443 get-phase
</code></pre>
<h1><a class="header" href="#bot-communities" id="bot-communities">Bot Communities</a></h1>
<p>Bot communities are helpful to test the Encointer protocol and all the surrounding applications, apps and UI's</p>
<p>To simplify the registration of a community, a python script was written to wrap up the chain client commands and automate the bootstrapping.
We will go through the process step by step.</p>
<p>If you'd rather learn how to register communities manually, visit <a href="developers-bot-communities.html#how-to-register-an-encointer-community-manually">this section</a></p>
<h2><a class="header" href="#setup" id="setup">Setup</a></h2>
<p>install all requirements for the python scripts (you'll need pip3 for that):</p>
<pre><code class="language-console">apt update
pip3 install --upgrade pip
pip3 install randomwords geojson pyproj flask
</code></pre>
<h3><a class="header" href="#local-testing" id="local-testing">Local Testing</a></h3>
<p>Setup the chain and client locally according to the <a href="developers-notee-local-setup.html">local setup</a>. </p>
<p>Run a faucet. Go to the client folder and run the faucet service in a seperate terminal which will be used to drip funds to the bootstrapping accounts later on:</p>
<pre><code class="language-console">cd client
./faucet.py
</code></pre>
<p>The faucet service is a flask app which runs on localhost and listens on port 5000 to incoming faucet requests.</p>
<p>In a local setup, we don't want to wait for the ceremony phase to change in fixed intervals. Instead, we use the <code>phase</code> service to watch extrinsic activity and forward the ceremony phase when the chain blocks are empty for a while indicating idleness.</p>
<pre><code class="language-console">cd client
./phase.py
</code></pre>
<p>By default, the scripts register your community on the local node listening on websocket port 9944. you can change that by adding the <code>--port 9945</code> argument</p>
<pre><code>./bot-community.py init
./bot-community.py benchmark
</code></pre>
<p>The benchmark command will watch for ceremony phase to change and act upon the new phase automatically. This command will run forever.</p>
<h4><a class="header" href="#branding-on-ipfs" id="branding-on-ipfs">Branding on IPFS</a></h4>
<p>Community branding information is stored on IPFS. You can save the community icons to a IPFS node by passing the <code>-l</code> or <code>--ipfs-local</code> flag to the init function.</p>
<pre><code>ipfs init
ipfs daemon
./bot-community.py --port 9945 init -l
</code></pre>
<h4><a class="header" href="#create-dummy-bazaar-businesses-and-offerings-and-save-the-data-on-an-ipfs-node" id="create-dummy-bazaar-businesses-and-offerings-and-save-the-data-on-an-ipfs-node">Create Dummy Bazaar Businesses and Offerings and Save the data on an IPFS node</a></h4>
<p>After a community is initialized, we can register businesses with offerings on the chain. Run the following script to create and register some random businesses and offerings:</p>
<pre><code class="language-console">./register-businesses.py -l
</code></pre>
<p>You can save the businesses and offerings descriptions on the local IPFS node by passing the -l or --ipfs-local flag to the script. Otherwise, the data will be saved on a remote IPFS node.</p>
<p>The businesses and offerings are stored in:</p>
<ul>
<li>./client/test-data/bazaar/businesses*</li>
<li>./client/test-data/bazaar/offerings*</li>
</ul>
<p>You can check the registered businesses and offerings using the client:</p>
<pre><code class="language-console">./target/release/encointer-client-notee list-businesses --cid COMMUNITY_IDENTIFIER 
./target/release/encointer-client-notee list-offerings --cid COMMUNITY_IDENTIFIER 
</code></pre>
<p>The business offerings can be obtained with the option <code>--cid</code> and arg <code>Account</code>, which is the owner of the business. In this case we used the account <code>//Alice</code>:</p>
<pre><code class="language-console">./target/release/encointer-node-notee list-business-offerings --cid COMMUNITY_IDENTIFIER //Alice
</code></pre>
<p>Note: the cid option needs to be entered in the base58 format.</p>
<h3><a class="header" href="#testnet-gesell-bot-communities" id="testnet-gesell-bot-communities">Testnet Gesell Bot Communities</a></h3>
<p>As community branding must be stored on IPFS, you'll need to specify credentials for a public IPFS gateway to be used to deploy content. For <a href="https://infura.io">Infura</a>, use:</p>
<pre><code>export IPFS_ADD_URL=https://ipfs.infura.io:5001/api/v0/add
export IPFS_API_KEY=&lt;project-id:password&gt;
</code></pre>
<p>To work with testnet Gesell you need to specify the node-url as follows:</p>
<pre><code>./bot-community.py --node-url wss://gesell.encointer.org init
</code></pre>
<p><em>Note: the port 443 is automatically set when working with a remote chain using <code>wss://</code></em></p>
<p>On Gesell, ceremony phases change every 10min. In order to continuously grow a bot community, 
run the following command every 10min</p>
<pre><code>./bot-community.py --node-url wss://gesell.encointer.org run
</code></pre>
<h2><a class="header" href="#explanations" id="explanations">Explanations</a></h2>
<p>Let's look at what is happening in the init function:</p>
<ol>
<li>Bootstrapper accounts are created. They can be seen in the ./my_keystore folder.</li>
<li>Funds are transfered to the bootstrappers via the faucet. As with other blockchains, funds are necessary in order to pay fees.</li>
<li>A specfile is created with a community name, a symbol, the icon of the community, the list of bootstrappers and several random meetup locations around a specified point.
You can see the community specfile in the client folder. It is a geojson file with the name of the community as filename.
The specfile is needed to register a community.</li>
<li>A new community is registered by passing the specfile and one of the bootstrappers (with funds) to the &quot;new_community&quot; function.</li>
</ol>
<p>Note:</p>
<ul>
<li>Make sure, the faucet script is running in the background while running the bot-community script to enable the faucet.</li>
<li>As you can read in our whitepaper, we'll avoid the faucet as an entry barrier in the future.</li>
<li>Should the faucet be exhausted, please post a message to our <a href="https://app.element.io/#/room/#encointer:matrix.org">element channel</a> and friendly request some topup. Please be patient.</li>
</ul>
<p>To check if a community is registered on the chain, you can use the client with the command &quot;list-communities&quot;:</p>
<pre><code class="language-console">./target/release/encointer-node-notee list-communities
</code></pre>
<p>The benchmark function calls the run function in an infinite loop, where the run function is responsible to handle the specific task depending on the phase.</p>
<p>At REGISTERING, it registers participants on the chain.
Additionally to registering participants, bootstrappers can endorse other accounts to speed up registration.
After participants are registered for a ceremony, the participatns can be verified in a seperate shell by calling:</p>
<pre><code class="language-bash">./target/release/encointer-node-notee list-participants
</code></pre>
<p>At ASSIGNING, the blockchain assigns all participants to randomized groups that will have to meet at a random meetup location at a specific time.
Participants can learn their assignment with:</p>
<pre><code class="language-bash">./target/release/encointer-node-notee list-meetups
</code></pre>
<p>At ATTESTING, the run function performs the meetup by getting each participants claims and attesting eachother.</p>
<p>To know in what phase the chain is, you can call:</p>
<pre><code class="language-bash">./target/release/encointer-node-notee get-phase
</code></pre>
<p>You should see either REGISTERING, ASSIGNING or ATTESTING.</p>
<p>A phase is ~10 min long so one whole cycle is 30 min. You can jump to the next phase on the local chain by running:</p>
<pre><code class="language-bash">./target/release/encointer-node-notee next-phase
</code></pre>
<p>Another way is to run the phase script in a seperate shell which switches phase every 10 blocks. You can add the option: --node_url wss://gesell.encointer.org to the phase script if you are working with the remote chain.</p>
<p>To define in what region the community shall be issued, we use the geojson standard to define a set of meetup places and add some meta-information about the community. You can use geojson.io to select meetup places on a map (define a few &quot;Points&quot;). Make sure that you select places that are &gt;100m apart. You also need to keep this minimal distance from other registered communities.</p>
<p>The number of locations that you should define depends on the size of the population N you'd like to bootstrap. As a rule of thumb, there should be at least N locations in order to guarantee reasonable randomization. As a maximum of 12 people can attend the same meetup the hard lower limit is N/12.</p>
<p>Every local community needs a trusted setup. A trustworthy group of 3-12 local people will hold the bootstrapping ceremony publicly. These bootstrappers need to be defined in the metadata block of the specfile.</p>
<p>At every subsequent ceremony you can add a few participants more but it is important to maintain reputation. At least 3/4 of all participants need to have attended the previous ceremony. So you can only grow your population at a pace that allows to build reputation.</p>
<p>An encointer ceremony happens at high sun on the same day all over the world. This way, no single person can attend more than one meetup. At each meetup, participants attest each others personhood. For this testnet, however, we don't care about real time or physical presence as we're testing with bot communities. See <a href="./deployments.html#time-warping-for-testnets">Time Warping</a> to learn how the timing maps between mainnet and Gesell.</p>
<p>Your new community has a very special property called <a href="./economics-demurrage.html">demurrage</a>. This means that the nominal value of your holdings decreases over time. Currently it is halving every year. You can observe this by waiting for a few blocks and checking your balance again. Think of this demurrage like a solidarity fee that you pay to the decentralized &quot;state&quot; that takes care of redistributing wealth among the local population at every ceremony as newly issued basic income.</p>
<h2><a class="header" href="#see-activity-in-explorer" id="see-activity-in-explorer">See Activity in Explorer</a></h2>
<p>Visit explorer.encointer.org to observe the growth of the community or run the explorer locally according to the <a href="./explorer">explorer</a> section.</p>
<h2><a class="header" href="#browse-bazaar-businesses-and-offernings" id="browse-bazaar-businesses-and-offernings">Browse Bazaar Businesses and Offernings</a></h2>
<p>See <a href="https://github.com/encointer/bazaar-web">Bazaar-web</a> repo and follow README to launch a web service that lists all businesses and offerings for a specified community</p>
<h1><a class="header" href="#gesell-local-dockerized-benchmark" id="gesell-local-dockerized-benchmark">Gesell local dockerized benchmark</a></h1>
<p>Follow the instruction on <a href="https://hub.docker.com/r/nomelc/encointer-notee">docker-tutorial</a> to get the docker image and required yml files.</p>
<h2><a class="header" href="#launch-local-docker-environment-with-gesell-node-and-comminities" id="launch-local-docker-environment-with-gesell-node-and-comminities">Launch local docker environment with Gesell node and comminities</a></h2>
<p>After the docker-compose file is set-up, you can start the docker containers with </p>
<pre><code class="language-console">docker-compose up -d
</code></pre>
<p>This will start a gesell node, 3 bot communities that will grow, a faucet script to ensure funds for transactions and a phase shifting script that changes every 10 blocks to the next phase (REGISTERING, ASSIGNING, ATTESTING).</p>
<h2><a class="header" href="#watch-communities-grow-on-explorer" id="watch-communities-grow-on-explorer">Watch communities grow on explorer</a></h2>
<p>Open up explorer.encointer.org in your browser and configure the node to be your dockerized gesell node with the predefined port. <br>
Alternatively, you can also start your local explorer as shown in the <a href="./explorer">explorer</a> section.</p>
<h2><a class="header" href="#watch-performance-metrics-prometheusgrafana" id="watch-performance-metrics-prometheusgrafana">Watch performance metrics (prometheus/grafana)</a></h2>
<p>According to the <a href="https://hub.docker.com/r/nomelc/encointer-notee">docker-tutorial</a>, grafana and prometheus should be set-up. 
Now, visit localhost:3000 and view the preformance metrics in your dashboard.</p>
<h1><a class="header" href="#local-teeproxy-setup" id="local-teeproxy-setup">Local TEEproxy setup</a></h1>
<p>TEEproxy is the variant of Encointer that protects privacy. It has been deployed to <a href="testnet-cantillon.html">testnet Cantillon</a></p>
<p>You can run an entire Demo locally on any properly set up SGX machine. This is for advanced users or developers. The instructions assume that you are able to build substrate blockchains.
If you do not have an SGX machine to test, please check our <a href="developers-teeproxy-local.html#docker-demo">dockerized demo in SW mode</a></p>
<h3><a class="header" href="#build-client-and-worker" id="build-client-and-worker">Build client and worker</a></h3>
<p>along the <a href="https://www.substratee.com/howto_worker.html">substraTEE-worker instructions</a>. With the following differences:</p>
<pre><code class="language-console">git clone https://github.com/encointer/encointer-worker.git
cd encointer-worker
./ci/install-rust.sh
make
</code></pre>
<p>Because the enclave cannot yet be built deterministically, you'll have to use our build if you intend to serve the same shards that we do (feel free to start new currencies on your own shard with different MRENCLAVE, but you won't be able to process the state of our/other shards):</p>
<pre><code>cd bin
wget https://github.com/encointer/encointer-worker/releases/download/v0.6.12-sub2.0.0/enclave-0.6.12.signed.so
rm enclave.signed.so
ln -s enclave-0.6.12-devsgx02.signed.so enclave.signed.so
</code></pre>
<p>Moreover, you will need to provision secrets (the <em>shielding key</em> and the <em>state encryption key</em>) to the enclave. In the future, this will be done by workers automatically mutually, as demonstrated in <a href="https://www.substratee.com/design.html#redundancy-m3-onwards">SubstraTEE M3</a>.</p>
<pre><code># still inside ./bin
# get our symmetric state encryption key
wget https://github.com/encointer/encointer-worker/releases/download/v0.6.10-sub2.0.0-alpha.7/aes_key_sealed.bin
# get our RSA shielding key
wget https://github.com/encointer/encointer-worker/releases/download/v0.6.10-sub2.0.0-alpha.7/rsa3072_key_sealed.bin
</code></pre>
<h3><a class="header" href="#build-node-1" id="build-node-1">Build node</a></h3>
<p>along the <a href="https://www.substratee.com/howto_node.html#build">substraTEE-node instructions</a>. With the following differences:</p>
<pre><code class="language-console">git clone https://github.com/encointer/encointer-node.git
cd encointer-node
git checkout sgx-master
cargo build --release
</code></pre>
<p>Run dev node locally</p>
<pre><code class="language-console">..encointer-node# ./target/release/encointer-node-teeproxy --dev --ws-port 9979
</code></pre>
<p>Run dev worker with a few insightful logs locally</p>
<pre><code class="language-bash">cd encointer-worker/bin
./encointer-worker init-shard
./encointer-worker shielding-key
./encointer-worker signing-key
export RUST_LOG=info,substrate_api_client=warn,sp_io=warn,ws=warn,encointer_worker=info,substratee_worker_enclave=debug,sp_io::misc=debug,runtime=debug,substratee_worker_enclave::state=warn,substratee_stf::sgx=debug
./encointer-worker -p 9979 run
</code></pre>
<h2><a class="header" href="#docker-demo" id="docker-demo">Docker Demo</a></h2>
<p>To avoid the need for an SGX machine, we provide a dockerized demo in SW mode as well (with emulated SGX)</p>
<pre><code>mkdir test
cd test
docker pull scssubstratee/substratee_dev:1804-2.12-1.1.3-001

docker run -it -v $(pwd):/root/work -p 9979:9944 -p 2079:2000 -p 3079:3443 scssubstratee/substratee_dev:1804-2.12-1.1.3-001 /bin/bash

cd work
</code></pre>
<p>Please observe that we are mapping the api ports to the host system. this way, you can expose the encointer demo to your home network and access it with our <a href="./app.html">mobile app</a> too.</p>
<p>We suggest to use tmux in docker to split your docker bash into 3 terminals. minimal cheatsheet:</p>
<ul>
<li><code>Ctrl-B &quot;</code> to split into one more terminal</li>
<li><code>Ctrl-B &lt;arrows&gt;</code> to switch focus to another terminal</li>
<li><code>Ctrl-B d</code> detatch session. re-attach with <code>tmux a</code></li>
</ul>
<h3><a class="header" href="#building" id="building">building</a></h3>
<p>in terminal 1 do</p>
<pre><code>git clone https://github.com/encointer/encointer-node.git
cd encointer-node
git checkout sgx-master
cargo build --release
export RUST_LOG=INFO,parity_ws=WARN,encointer=debug
./target/release/encointer-node-teeproxy --dev --ws-external -lencointer=debug,runtime=debug
</code></pre>
<p>Your chain should now start producing blocks.</p>
<p>in terminal 2 do</p>
<pre><code>git clone https://github.com/encointer/encointer-worker.git
cd encointer-worker
SGX_MODE=SW make
cd bin
./encointer-worker signing-key
./encointer-worker shielding-key
./encointer-worker init-shard
./encointer-worker mrenclave &gt; ~/mrenclave.b58
export RUST_LOG=debug,substrate_api_client=warn,sp_io=warn,ws=warn,encointer_worker=info,substratee_worker_enclave=info,sp_io::misc=debug,runtime=debug,substratee_worker_enclave::state=warn,substratee_stf::sgx=info,chain_relay=warn,rustls=warn,encointer=debug
touch spid.txt key.txt
./encointer-worker --ws-external run --skip-ra 
</code></pre>
<p>Your worker should sync blocks now.</p>
<p>Now you have a running local Encointer system.</p>
<h3><a class="header" href="#run-a-bot-community" id="run-a-bot-community">run a bot community</a></h3>
<p>in terminal 3 do</p>
<pre><code class="language-console">cd encointer-worker/client/
MRENCLAVE=$(cat ~/mrenclave.b58)
nano bot-community.py
</code></pre>
<p>now edit the following lines to match your setup</p>
<pre><code>cli = [&quot;./encointer-client&quot;]
...
MRENCLAVE = &quot;&lt;your mrenclave here&gt;&quot;
</code></pre>
<p>save and exit with Ctrl-X</p>
<pre><code class="language-console">apt update
apt install python3-geojson python3-pyproj
./bot-community.py init
./bot-community.py benchmark
</code></pre>
<p>now you can see how your bots register for ceremonies and get a UBI. More and more bots join the community for every ceremony.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
